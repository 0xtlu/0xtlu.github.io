function initToggleShowToc(){KEEP.utils.postHelper={postPageContainerDom:document.querySelector(".post-page-container"),toggleShowTocBtnDom:document.querySelector(".toggle-show-toc"),toggleShowTocIcon:document.querySelector(".toggle-show-toc i"),mainContentDom:document.querySelector(".main-content"),postToolsDom:document.querySelector(".post-tools"),goToCommentsDom:document.querySelector(".post-tools .go-to-comments"),isShowToc:false,initToggleToc(){this.toggleShowTocBtnDom&&this.toggleShowTocBtnDom.addEventListener("click",()=>{this.isShowToc=!this.isShowToc;KEEP.styleStatus.isShowToc=this.isShowToc;KEEP.setStyleStatus();this.handleToggleToc(this.isShowToc)})},handleToggleToc(o){if(o){this.postPageContainerDom.classList.add("show-toc");document.body.classList.add("has-toc")}else{this.postPageContainerDom.classList.remove("show-toc");document.body.classList.remove("has-toc")}setTimeout(()=>{this.setPostToolsLeft()},120)},hasToc(o){this.toggleShowTocBtnDom.style.display="flex";this.isShowToc=o;this.handleToggleToc(o)},setPostToolsLeft(o){const t=o?o:this.mainContentDom.getBoundingClientRect().width.toFixed(0);let e=5;if(window.innerWidth<=800){e=3}this.postToolsDom.style.opacity=`1`;this.postToolsDom.style.left=`calc((100vw - ${t}px) / 2 - ${e}rem)`},initSetPostToolsLeft(){setTimeout(()=>{this.setPostToolsLeft()},150);window.addEventListener("resize",()=>{this.setPostToolsLeft()})},goToComments(){const s=document.querySelector("#comments-anchor");if(this.goToCommentsDom&&s){this.goToCommentsDom.addEventListener("click",o=>{o.preventDefault();let t=window.scrollY;t=t===0?-20:t;const e=s.getBoundingClientRect().top+t;window.anime({targets:document.scrollingElement,duration:300,easing:"linear",scrollTop:e,complete:()=>{setTimeout(()=>{KEEP.utils.pageTop_dom.classList.add("hide")},150)}})})}},watchPostCommentsCount(){const e=this.postToolsDom.querySelector(".post-comments-count");if(!e)return;const o={attributes:true,childList:true};const t=function(o){o.forEach(o=>{if(o.type==="childList"){const t=Number(o.target.innerHTML);if(t>0){e.style.display="flex";if(t>99){e.innerHTML="99+";s.disconnect()}}}})};const s=new MutationObserver(t);s.observe(e,o)},initSetPostLink(){const o=document.querySelector(".copyright-info-content .post-link .content");o&&(o.innerHTML=decodeURI(window.location.href))}};KEEP.utils.postHelper.initSetPostToolsLeft();if(KEEP.theme_config.toc?.enable===true){KEEP.utils.postHelper.initToggleToc()}if(KEEP.theme_config.comment?.enable===true){KEEP.utils.postHelper.goToComments();KEEP.utils.postHelper.watchPostCommentsCount()}if(KEEP.theme_config.post?.copyright_info===true){KEEP.utils.postHelper.initSetPostLink()}}if(KEEP.theme_config.pjax?.enable===true&&KEEP.utils){initToggleShowToc()}else{window.addEventListener("DOMContentLoaded",initToggleShowToc)}