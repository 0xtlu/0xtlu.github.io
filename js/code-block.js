KEEP.initCodeBlockTools=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this);this.parentNode.removeChild(this);e.appendChild(this)};const{style:e}=KEEP.theme_config?.code_copy||{};const{style:t}=KEEP.theme_config?.code_block||{};const{style:o}=KEEP.theme_config?.code_block?.tools||{};const a=(e||t||o||"default")==="mac";const l=a?"fas fa-chevron-left":"fas fa-chevron-right";const{copy:i,copied:f,fold:p,folded:y}=KEEP.language_code_block;const u=`<span class="tool fold tooltip" data-content="${p}" data-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach(d=>{let e=d.classList.length?d.classList[1].toUpperCase():"";if(e==="PLAINTEXT"){e=""}const t=document.createElement("div");t.classList.add("highlight-container");if(a){t.classList.add("mac")}d.wrap(t);const o=`${e?'<span class="code-lang">'+e+"</span>":""}`;t.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">
        ${a?u+o:"<span>"+u+o+"</span>"}
        <span class="tool copy tooltip" data-content="${i}" data-offset-y="-2px"><i class="fas fa-copy"></i></span>
      </div>`);const r=d.parentNode.querySelector(".code-tools-box");const s=r.querySelector(".copy");const c=r.querySelector(".fold");s.addEventListener("click",e=>{const t=e.currentTarget;const o=[...d.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n");const s=document.createElement("textarea");s.style.top=window.scrollY+"px";s.style.position="absolute";s.style.opacity="0";s.readOnly=true;s.value=o;document.body.append(s);const c=document.getSelection();const n=c.rangeCount>0?c.getRangeAt(0):false;s.select();s.setSelectionRange(0,o.length);s.readOnly=false;const a=document.execCommand("copy");const l=t.querySelector("i");const i=r.querySelector(".copy .tooltip-content");if(a){l.className="fas fa-check";i&&(i.innerHTML=f)}else{l.className="fas fa-times"}s.blur();t.blur();if(n){c.removeAllRanges();c.addRange(n)}document.body.removeChild(s)});s.addEventListener("mouseleave",t=>{setTimeout(()=>{t.target.querySelector("i").className="fas fa-copy";const e=r.querySelector(".copy .tooltip-content");e&&(e.innerHTML=i)},500)});let n=false;c.addEventListener("click",e=>{const t=e.currentTarget;const o=t.querySelector("i");const s=r.querySelector(".fold .tooltip-content");n=!n;if(n){o.className=l;d.classList.add("folded");r.classList.add("folded");s&&(s.innerHTML=y)}else{o.className="fas fa-chevron-down";d.classList.remove("folded");r.classList.remove("folded");s&&(s.innerHTML=p)}})})};